var w=Object.defineProperty;var D=(s,e,t)=>e in s?w(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var n=(s,e,t)=>(D(s,typeof e!="symbol"?e+"":e,t),t);import{U as g,r as h,w as y}from"./index.ffbdcf06.js";import{a as l}from"./axios.ab682c6b.js";class f{constructor(){n(this,"getNewResearchData",async()=>{let e;return await l.post("/api/new-research-data").then(function(t){e=t.data}).catch(t=>{console.log(t)}),e});n(this,"addNewResearch",async e=>{fetch("/api/new-research-add",{method:"POST",body:e}).catch(t=>console.error("Error:",t))});n(this,"getResearchList",async e=>{let t;return await l.post("/api/research",e).then(function(c){t=c.data}).catch(function(c){console.log(c)}),t});n(this,"startAnalysis",e=>{l.post("/api/analysis",{id:e}).catch(t=>{console.log(t)})})}}const o=new f,P=g("research",()=>{const s=h([]),e=h({searchQuery:"",sortOption:"",sortDescending:!0,page:1,perPage:7}),t=(a,i)=>{e.value.sortOption=a,e.value.sortDescending=i},c=a=>{e.value.searchQuery=a},u=()=>{s.value=[],o.getResearchList(e.value).then(a=>{a!=null&&a.length&&s.value.push(...a)})};y(e,()=>{u()},{deep:!0});const R=h(!1),r=h({id:"",researchDate:new Date().toLocaleDateString().split(".").reverse().join("-"),institutionsByReferral:[]}),p=async()=>{var i;let a;await((i=o.getNewResearchData())==null?void 0:i.then(d=>{d&&(a=d)})),a&&(r.value.id=a.id,r.value.institutionsByReferral=a.institutionByReferral)};return{researchItems:s,addNewResearch:a=>{a.append("researchDate",r.value.researchDate),a.append("researchDate",r.value.id),o.addNewResearch(a)},isNewResearchForm:R,newResearchData:r,resetNewResearchData:()=>{r.value={id:"",researchDate:new Date().toLocaleDateString().split(".").reverse().join("-"),institutionsByReferral:[]},p()},listRequestParameters:e,setSortRequestParameters:t,getResearchList:u,getNewResearchData:p,startAnalysis:async a=>{await o.startAnalysis(a),o.getResearchList(e.value)},setSearchRequestParameter:c}});export{P as u};
